
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Header with Tabs and Search Bar</title>
	<style>
		/* Basic styling for the header */
		body {
			font-family: Arial, sans-serif;
			margin: 0;
			padding: 0;
		}
		header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 10px 20px;
			background-color: #333;
			color: #fff;
		}
		/* Styling for navigation tabs */
		.nav-tabs {
			list-style: none;
			display: flex;
			gap: 20px;
			margin: 0;
			padding: 0;
		}
		.nav-tabs li {
			margin: 0;
		}
		.nav-tabs a {
			text-decoration: none;
			color: #fff;
			padding: 8px 16px;
			transition: background-color 0.3s;
		}
		.nav-tabs a:hover {
			background-color: #555;
			border-radius: 5px;
		}
		/* Styling for the search bar */
		.search-bar {
			display: flex;
			align-items: center;
		}
		.search-bar input[type="text"] {
			padding: 8px;
			border: none;
			border-radius: 4px;
			outline: none;
		}
		.search-bar button {
			padding: 8px 12px;
			border: none;
			background-color: #555;
			color: #fff;
			cursor: pointer;
			border-radius: 4px;
			margin-left: 5px;
			transition: background-color 0.3s;
		}
		.search-bar button:hover {
			background-color: #777;
		}
	</style>
</head>
<body>
	<header>
		<ul class="nav-tabs">
			<li><a href="home.html">Home</a></li>
			<li><a href="about.html">About</a></li>
			<li><a href="contact.html">Contact</a></li>
		</ul>
		<div class="search-bar"> 
            <input id="searchInput" type="text" placeholder="Search...">
            <button type="button" onclick="search()">Search</button>
        </div>
	</header>

    <div class="container" style="margin-top: 100px;">
        <h1 class="sitetitle">Search Results</h1>
        <p class="lead">Results for "<span id="search-query"></span>":</p>
    
        <section class="search-results">
            <div id="results-container" class="card-columns listrecent"></div>
        </section>
    </div>

    <script>
        
        // Function to parse query from URL
        function getQueryParameter(param) {
            var urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Function to fetch posts data from JSON file
        async function fetchPosts() {
            try {
                const response = await fetch('posts.json');
                if (!response.ok) {
                    throw new Error('Failed to load posts');
                }
                return await response.json();
            } catch (error) {
                console.error('Error fetching posts:', error);
                return [];
            }
        }

        // Function to render search results
        function renderResults(query, posts) {
            const resultsContainer = document.getElementById('results-container');
            const searchQuerySpan = document.getElementById('search-query');
            searchQuerySpan.textContent = query;

            // Filter posts by title, description, tags, or keywords matching the query
            const filteredPosts = posts.filter(post => 
                post.title.toLowerCase().includes(query.toLowerCase()) ||
                post.description.toLowerCase().includes(query.toLowerCase()) ||
                post.tags.some(tag => tag.toLowerCase().includes(query.toLowerCase())) ||
                post.keywords.some(keyword => keyword.toLowerCase().includes(query.toLowerCase())));

            // Display results or no results message
            if (filteredPosts.length > 0) {
                filteredPosts.forEach(post => {
                    const postHtml = `
                        <div class="card">
                            <a href="${post.link}">
                            <img class="img-fluid" src="${post.image}" alt="">
                            </a>
                        <div class="card-block">
                            <h2 class="card-title"><a href="${post.link}">${post.title}</a></h2>
                            <h4 class="card-text">${post.description}</h4>
                            <div class="metafooter">
                                <div class="wrapfooter">
                                    <span class="author-meta">
                                        <span class="post-date">${post.date}</span>
                                        </span>
                                </div>
                            </div>
                        </div>`;
                        resultsContainer.innerHTML += postHtml;
                    });
            } else {
                resultsContainer.innerHTML = '<p>No results found for your search.</p>';
            }
        }

        
        // Initialize search results page
        document.addEventListener("DOMContentLoaded", async function() {
            const query = getQueryParameter('q');
            if (query) {
                const posts = await fetchPosts();
                renderResults(query, posts);
            } else {
                document.getElementById('results-container').innerHTML = '<p>Please enter a search query.</p>';
            }
        });
    </script>

    <script src="search.js"></script>
</body>
</html>